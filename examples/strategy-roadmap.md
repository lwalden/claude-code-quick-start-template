# Product Brief & Roadmap

> The "why" and "what" behind this project. Claude references this on-demand for decision context.

---

## What & Why

**Problem:** Saving recipes from the web means screenshots, bookmarks, or copy-pasting into notes — none of which are searchable by ingredient. Home cooks can't answer "what can I make with chicken and lemon?" without scrolling.
**Vision:** A personal recipe library where you can find recipes by what's in your fridge, not just by name.
**Target Users:** Home cooks who collect recipes from multiple sources and want to search by ingredient.

---

## MVP Features (Phase 1)

1. User registration and login -- Acceptance: can create account, log in, receive JWT; protected endpoints reject requests without valid token
2. Recipe CRUD -- Acceptance: authenticated user can create, read, update, delete their own recipes; attempts to modify others' recipes return 403
3. Ingredient-based search -- Acceptance: GET /recipes?ingredients=chicken,garlic returns recipes containing ALL specified ingredients; empty result set returns [] not 404
4. Favorites -- Acceptance: authenticated user can POST /users/me/favorites/:recipeId and DELETE same; GET /users/me/favorites returns paginated list
5. Basic rate limiting -- Acceptance: more than 100 requests per minute from the same IP returns 429 with Retry-After header

**Out of Scope (Phase 1):** Recipe import from URLs, image uploads, social features (comments, follows), nutrition data, meal planning, mobile app, public recipe discovery feed.

---

## Technical Stack

| Component | Choice | Why |
|-----------|--------|-----|
| Runtime | Node.js 20 LTS | Familiarity, strong ecosystem |
| Framework | Express 4 | Ecosystem, familiarity (see DECISIONS.md) |
| Database | PostgreSQL 16 | Relational model fits recipe data (see DECISIONS.md) |
| ORM/Query | pg (raw SQL + parameterized queries) | Avoid ORM abstraction for a learning project |
| Validation | Zod | TypeScript-first schema + type inference (see DECISIONS.md) |
| Auth | JWT (jsonwebtoken) | Stateless, API-friendly (see DECISIONS.md) |
| Testing | Jest + Supertest | Integration tests against real DB (test schema) |
| Hosting | Railway (prod) | Simple Postgres + Node hosting, free tier available |

---

## Quality Tier

**Tier:** Standard
**Testing:** Integration tests for all API endpoints (happy path + key error cases). Unit tests for validation schemas and utility functions. No E2E or load testing for Phase 1. CI runs tests on every PR via GitHub Actions.

---

## Phases

**Phase 1 (MVP):** 3 weeks — auth, recipe CRUD, ingredient search, favorites, rate limiting
**Phase 2:** Recipe import from URL (scraping), image upload to S3, pagination improvements
**Phase 3:** Public discovery feed, tags/collections, export to PDF

---

## Open Questions

<!-- TODO: Decide on full-text search approach for ingredient search | WHEN: Before Phase 1 complete | BLOCKS: search endpoint implementation -->
<!-- TODO: Confirm Railway free tier limits are acceptable for early users | WHEN: Before Phase 2 | BLOCKS: nothing yet -->

---

## Human Actions Needed

- Provision PostgreSQL on Railway for staging/prod — Before Phase 1 deploy
- Create GitHub repo and enable GitHub Actions — Before first PR

---

*Generated by /plan | Last Updated: 2026-02-13*
